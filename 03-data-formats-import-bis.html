<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.29">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>4&nbsp; Mass Spectrometry Data Formats, Standards, and Import Workflows: A Comprehensive Technical Guide – R for Mass Spectrometry</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./04-spectral-preprocessing-bis.html" rel="next">
<link href="./02-r-fundamentals.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-0815c480559380816a4d1ea211a47e91.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-23d003e80a5415bcd382f8d57091344b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css">

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./02-r-fundamentals.html">Core Techniques</a></li><li class="breadcrumb-item"><a href="./03-data-formats-import-bis.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Mass Spectrometry Data Formats, Standards, and Import Workflows: A Comprehensive Technical Guide</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R for Mass Spectrometry</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/vanhungtran/RforMS" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Foundations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction - Principles of Mass Spectrometry and Strategies for Data Acquisition</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-Introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Mass Spectrometry in R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-open-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Accessing Open MS Data with MsDataHub</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Core Techniques</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-r-fundamentals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R Fundamentals for Mass Spectrometry</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-data-formats-import-bis.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Mass Spectrometry Data Formats, Standards, and Import Workflows: A Comprehensive Technical Guide</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-spectral-preprocessing-bis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Spectral Data Preprocessing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-peak-detection-quantification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Peak Detection and Quantification</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Analysis &amp; Visualization</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-data-visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data Visualization for Mass Spectrometry</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-statistical-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Statistical Analysis of MS Data</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Applications</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-metabolomics-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Metabolomics Data Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-proteomics-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Proteomics Data Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-qfeatures-quantitative.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Quantitative Proteomics with QFeatures</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Advanced Topics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-advanced-topics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Advanced Topics and Applications</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Summary and Future Directions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="2">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#the-mass-spectrometry-data-landscape-from-proprietary-silos-to-open-standards" id="toc-the-mass-spectrometry-data-landscape-from-proprietary-silos-to-open-standards" class="nav-link active" data-scroll-target="#the-mass-spectrometry-data-landscape-from-proprietary-silos-to-open-standards"><span class="header-section-number">4.1</span> The Mass Spectrometry Data Landscape: From Proprietary Silos to Open Standards</a>
  <ul class="collapse">
  <li><a href="#the-black-box-problem-proprietary-vendor-formats" id="toc-the-black-box-problem-proprietary-vendor-formats" class="nav-link" data-scroll-target="#the-black-box-problem-proprietary-vendor-formats"><span class="header-section-number">4.1.1</span> The “Black Box” Problem: Proprietary (Vendor) Formats</a></li>
  <li><a href="#the-interoperability-imperative-the-rise-of-open-standards" id="toc-the-interoperability-imperative-the-rise-of-open-standards" class="nav-link" data-scroll-target="#the-interoperability-imperative-the-rise-of-open-standards"><span class="header-section-number">4.1.2</span> The Interoperability Imperative: The Rise of Open Standards</a></li>
  <li><a href="#the-role-of-standards-bodies-the-hupo-proteomics-standards-initiative-psi" id="toc-the-role-of-standards-bodies-the-hupo-proteomics-standards-initiative-psi" class="nav-link" data-scroll-target="#the-role-of-standards-bodies-the-hupo-proteomics-standards-initiative-psi"><span class="header-section-number">4.1.3</span> The Role of Standards Bodies: The HUPO Proteomics Standards Initiative (PSI)</a></li>
  </ul></li>
  <li><a href="#fundamental-data-concepts-deconstructing-the-mass-spectrum" id="toc-fundamental-data-concepts-deconstructing-the-mass-spectrum" class="nav-link" data-scroll-target="#fundamental-data-concepts-deconstructing-the-mass-spectrum"><span class="header-section-number">4.2</span> Fundamental Data Concepts: Deconstructing the Mass Spectrum</a>
  <ul class="collapse">
  <li><a href="#profile-vs.-centroid-the-raw-signal-and-its-abstraction" id="toc-profile-vs.-centroid-the-raw-signal-and-its-abstraction" class="nav-link" data-scroll-target="#profile-vs.-centroid-the-raw-signal-and-its-abstraction"><span class="header-section-number">4.2.1</span> Profile vs.&nbsp;Centroid: The Raw Signal and Its Abstraction</a></li>
  <li><a href="#anatomy-of-a-scan-core-data-arrays-mz-and-intensity" id="toc-anatomy-of-a-scan-core-data-arrays-mz-and-intensity" class="nav-link" data-scroll-target="#anatomy-of-a-scan-core-data-arrays-mz-and-intensity"><span class="header-section-number">4.2.2</span> Anatomy of a Scan: Core Data Arrays (m/z and Intensity)</a></li>
  <li><a href="#the-metadata-framework-scan-headers-and-controlled-vocabularies" id="toc-the-metadata-framework-scan-headers-and-controlled-vocabularies" class="nav-link" data-scroll-target="#the-metadata-framework-scan-headers-and-controlled-vocabularies"><span class="header-section-number">4.2.3</span> The Metadata Framework: Scan Headers and Controlled Vocabularies</a></li>
  </ul></li>
  <li><a href="#iii.-the-data-conversion-workflow-the-proteowizard-msconvert-toolkit" id="toc-iii.-the-data-conversion-workflow-the-proteowizard-msconvert-toolkit" class="nav-link" data-scroll-target="#iii.-the-data-conversion-workflow-the-proteowizard-msconvert-toolkit"><span class="header-section-number">4.3</span> III. The Data Conversion Workflow: The ProteoWizard msConvert Toolkit</a>
  <ul class="collapse">
  <li><a href="#the-rosetta-stone-of-proteomics-msconvert" id="toc-the-rosetta-stone-of-proteomics-msconvert" class="nav-link" data-scroll-target="#the-rosetta-stone-of-proteomics-msconvert"><span class="header-section-number">4.3.1</span> The “Rosetta Stone” of Proteomics: msConvert</a></li>
  <li><a href="#practical-conversion-guide-command-line-options-and-filters" id="toc-practical-conversion-guide-command-line-options-and-filters" class="nav-link" data-scroll-target="#practical-conversion-guide-command-line-options-and-filters"><span class="header-section-number">4.3.2</span> Practical Conversion Guide: Command-Line Options and Filters</a></li>
  <li><a href="#tutorial-a-reproducible-conversion-from-vendor-raw-to-centroided-mzml" id="toc-tutorial-a-reproducible-conversion-from-vendor-raw-to-centroided-mzml" class="nav-link" data-scroll-target="#tutorial-a-reproducible-conversion-from-vendor-raw-to-centroided-mzml"><span class="header-section-number">4.3.3</span> Tutorial: A Reproducible Conversion from Vendor RAW to Centroided mzML</a></li>
  </ul></li>
  <li><a href="#deep-dive-key-open-formats-and-their-internal-structures" id="toc-deep-dive-key-open-formats-and-their-internal-structures" class="nav-link" data-scroll-target="#deep-dive-key-open-formats-and-their-internal-structures"><span class="header-section-number">4.4</span> Deep Dive: Key Open Formats and Their Internal Structures</a>
  <ul class="collapse">
  <li><a href="#thermo.raw-and-the-thermorawfileparser" id="toc-thermo.raw-and-the-thermorawfileparser" class="nav-link" data-scroll-target="#thermo.raw-and-the-thermorawfileparser"><span class="header-section-number">4.4.1</span> Thermo.raw and the ThermoRawFileParser</a></li>
  <li><a href="#the-workhorse-mzml-internal-structure" id="toc-the-workhorse-mzml-internal-structure" class="nav-link" data-scroll-target="#the-workhorse-mzml-internal-structure"><span class="header-section-number">4.4.2</span> The Workhorse: mzML Internal Structure</a></li>
  <li><a href="#the-spatial-dimension-imzml-for-mass-spectrometry-imaging" id="toc-the-spatial-dimension-imzml-for-mass-spectrometry-imaging" class="nav-link" data-scroll-target="#the-spatial-dimension-imzml-for-mass-spectrometry-imaging"><span class="header-section-number">4.4.3</span> The Spatial Dimension: imzML for Mass Spectrometry Imaging</a></li>
  <li><a href="#the-future-high-performance-formats-mzmlb-and-mzpeak" id="toc-the-future-high-performance-formats-mzmlb-and-mzpeak" class="nav-link" data-scroll-target="#the-future-high-performance-formats-mzmlb-and-mzpeak"><span class="header-section-number">4.4.4</span> The Future: High-Performance Formats (mzMLb and mzPeak)</a></li>
  </ul></li>
  <li><a href="#acquisition-mode-and-file-structure-dda-vs.-dia" id="toc-acquisition-mode-and-file-structure-dda-vs.-dia" class="nav-link" data-scroll-target="#acquisition-mode-and-file-structure-dda-vs.-dia"><span class="header-section-number">4.5</span> Acquisition Mode and File Structure: DDA vs.&nbsp;DIA</a>
  <ul class="collapse">
  <li><a href="#data-dependent-acquisition-dda" id="toc-data-dependent-acquisition-dda" class="nav-link" data-scroll-target="#data-dependent-acquisition-dda"><span class="header-section-number">4.5.1</span> Data-Dependent Acquisition (DDA)</a></li>
  <li><a href="#data-independent-acquisition-dia" id="toc-data-independent-acquisition-dia" class="nav-link" data-scroll-target="#data-independent-acquisition-dia"><span class="header-section-number">4.5.2</span> Data-Independent Acquisition (DIA)</a></li>
  <li><a href="#c.-implications-for-data-format-and-import" id="toc-c.-implications-for-data-format-and-import" class="nav-link" data-scroll-target="#c.-implications-for-data-format-and-import"><span class="header-section-number">4.5.3</span> C. Implications for Data Format and Import</a></li>
  </ul></li>
  <li><a href="#programmatic-data-import-and-analysis" id="toc-programmatic-data-import-and-analysis" class="nav-link" data-scroll-target="#programmatic-data-import-and-analysis"><span class="header-section-number">4.6</span> Programmatic Data Import and Analysis</a>
  <ul class="collapse">
  <li><a href="#python-ecosystem-pymzml" id="toc-python-ecosystem-pymzml" class="nav-link" data-scroll-target="#python-ecosystem-pymzml"><span class="header-section-number">4.6.1</span> Python Ecosystem: pymzML</a></li>
  <li><a href="#python-ecosystem-pyteomics" id="toc-python-ecosystem-pyteomics" class="nav-link" data-scroll-target="#python-ecosystem-pyteomics"><span class="header-section-number">4.6.2</span> Python Ecosystem: pyteomics</a></li>
  <li><a href="#rbioconductor-ecosystem-mzr" id="toc-rbioconductor-ecosystem-mzr" class="nav-link" data-scroll-target="#rbioconductor-ecosystem-mzr"><span class="header-section-number">4.6.3</span> R/Bioconductor Ecosystem: mzR</a></li>
  </ul></li>
  <li><a href="#vii.-best-practices-for-data-management-and-reproducibility" id="toc-vii.-best-practices-for-data-management-and-reproducibility" class="nav-link" data-scroll-target="#vii.-best-practices-for-data-management-and-reproducibility"><span class="header-section-number">4.7</span> VII. Best Practices for Data Management and Reproducibility</a>
  <ul class="collapse">
  <li><a href="#a.-addressing-the-data-deluge-storage-and-access" id="toc-a.-addressing-the-data-deluge-storage-and-access" class="nav-link" data-scroll-target="#a.-addressing-the-data-deluge-storage-and-access"><span class="header-section-number">4.7.1</span> A. Addressing the Data Deluge: Storage and Access</a></li>
  <li><a href="#b.-ensuring-transparent-and-reproducible-analysis" id="toc-b.-ensuring-transparent-and-reproducible-analysis" class="nav-link" data-scroll-target="#b.-ensuring-transparent-and-reproducible-analysis"><span class="header-section-number">4.7.2</span> B. Ensuring Transparent and Reproducible Analysis</a></li>
  </ul></li>
  <li><a href="#conclusions" id="toc-conclusions" class="nav-link" data-scroll-target="#conclusions"><span class="header-section-number">4.8</span> Conclusions</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">4.9</span> References</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/vanhungtran/RforMS/edit/main/03-data-formats-import-bis.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/vanhungtran/RforMS/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./02-r-fundamentals.html">Core Techniques</a></li><li class="breadcrumb-item"><a href="./03-data-formats-import-bis.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Mass Spectrometry Data Formats, Standards, and Import Workflows: A Comprehensive Technical Guide</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Mass Spectrometry Data Formats, Standards, and Import Workflows: A Comprehensive Technical Guide</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="the-mass-spectrometry-data-landscape-from-proprietary-silos-to-open-standards" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="the-mass-spectrometry-data-landscape-from-proprietary-silos-to-open-standards"><span class="header-section-number">4.1</span> The Mass Spectrometry Data Landscape: From Proprietary Silos to Open Standards</h2>
<p>The application of mass spectrometry (MS) to fields like proteomics and metabolomics has enabled the high-throughput analysis of thousands of molecules per experiment. This capacity, however, has generated a “formidable informatics challenge”. A primary source of this challenge is not the data itself, but the complex and balkanized landscape of data file formats. Understanding this landscape—a history of proprietary “black boxes” and the community-driven development of open standards—is the first and most critical step for any researcher intending to perform effective data analysis.</p>
<section id="the-black-box-problem-proprietary-vendor-formats" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="the-black-box-problem-proprietary-vendor-formats"><span class="header-section-number">4.1.1</span> The “Black Box” Problem: Proprietary (Vendor) Formats</h3>
<p>Historically, mass spectrometry instrument manufacturers have each developed unique, proprietary data formats.[1] These formats are highly optimized for the specific acquisition software and hardware of the vendor, but they create a significant barrier to data access and interoperability. The data is effectively locked within a “black box,” accessible only through the vendor’s own, often Windows-exclusive, software.</p>
<p>This lack of interoperability has been a major bottleneck in computational proteomics. It historically crippled the ability of open-source tools to operate on raw data, hindering the use of scalable, cross-platform computing environments like Linux-based clusters and cloud infrastructure, which are increasingly necessary to process the “big data” generated by modern instruments.[2] A researcher with data from two different vendors (e.g., Thermo and Sciex) would be unable to analyze them in a single, unified pipeline without a translation layer.</p>
<p>Table 1 provides a non-exhaustive list of the most common proprietary formats that a researcher will encounter. It is critical to note that formats with the same extension, such as the <code>.RAW</code> file from Thermo and the <code>.RAW</code> <em>folder</em> from Waters, are completely different, unrelated, and mutually incompatible.[1]</p>
<p><strong>Table 1: Comparison of Common Proprietary Mass Spectrometry Formats</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Vendor</th>
<th style="text-align: left;">Proprietary Extension(s)</th>
<th style="text-align: left;">Format Type</th>
<th style="text-align: left;">Instrument Software</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Thermo Fisher Scientific</strong></td>
<td style="text-align: left;"><code>.RAW</code></td>
<td style="text-align: left;">Single Binary File</td>
<td style="text-align: left;">Xcalibur [1, 3, 4]</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Sciex (ABI/Sciex)</strong></td>
<td style="text-align: left;"><code>.WIFF</code>, <code>.WIFF2</code></td>
<td style="text-align: left;">File (often with associated <code>.wiff.scan</code>)</td>
<td style="text-align: left;">Analyst [1, 3, 4]</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Agilent Technologies</strong></td>
<td style="text-align: left;"><code>.D</code></td>
<td style="text-align: left;">Directory/Folder</td>
<td style="text-align: left;">MassHunter [1]</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Bruker Daltonics</strong></td>
<td style="text-align: left;"><code>.D</code></td>
<td style="text-align: left;">Directory/Folder (containing files like BAF, YEP, TDF)</td>
<td style="text-align: left;">Compass [1]</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Waters Corporation</strong></td>
<td style="text-align: left;"><code>.RAW</code></td>
<td style="text-align: left;">Directory/Folder</td>
<td style="text-align: left;">MassLynx [1, 4]</td>
</tr>
</tbody>
</table>
</section>
<section id="the-interoperability-imperative-the-rise-of-open-standards" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="the-interoperability-imperative-the-rise-of-open-standards"><span class="header-section-number">4.1.2</span> The Interoperability Imperative: The Rise of Open Standards</h3>
<p>The barrier imposed by proprietary formats necessitated a community-driven response. The solution was to develop open, non-proprietary, and standardized file formats that could serve as a universal <em>lingua franca</em> for mass spectrometry data.[5]</p>
<p>This effort began in the early 2000s, leading to the development of two parallel, XML-based standards [6, 7]:</p>
<ol type="1">
<li><strong>mzData:</strong> Developed by the Human Proteome Organization (HUPO) Proteomics Standards Initiative (PSI), primarily intended as a data exchange and archival format.[1, 6]</li>
<li><strong>mzXML:</strong> Developed by the Institute for Systems Biology (ISB) / Seattle Proteome Center (SPC), primarily to streamline data processing workflows for tools like the Trans-Proteomic Pipeline (TPP).[1, 6]</li>
</ol>
<p>While both were successful, having two competing standards for the same purpose created a new type of confusion and still required software developers to support both formats.[6] Recognizing this, the designers of both mzData and mzXML, along with major instrument vendors, joined forces under the HUPO-PSI to create a single, unified format.[6]</p>
<p>This unified standard is <strong>mzML</strong>. It was designed to incorporate the best aspects of its two predecessors and is intended to replace them as the single, definitive standard for raw MS data exchange and deposition.[1, 6] First released in 2008, it has remained remarkably stable and is the foundational format for nearly all modern, open-source proteomics and metabolomics workflows.[1]</p>
</section>
<section id="the-role-of-standards-bodies-the-hupo-proteomics-standards-initiative-psi" class="level3" data-number="4.1.3">
<h3 data-number="4.1.3" class="anchored" data-anchor-id="the-role-of-standards-bodies-the-hupo-proteomics-standards-initiative-psi"><span class="header-section-number">4.1.3</span> The Role of Standards Bodies: The HUPO Proteomics Standards Initiative (PSI)</h3>
<p>The success and stability of mzML where previous efforts created confusion is not just due to its XML structure, but to the robust governance of the <strong>HUPO Proteomics Standards Initiative (PSI)</strong>.[8] The PSI’s mission is to define and promote community standards for data representation to facilitate “data comparison, exchange and verification”.[8]</p>
<p>The single most important-component of this standardization effort is not the mzML file schema itself, but the <strong>PSI-Mass Spectrometry Controlled Vocabulary (PSI-MS CV)</strong>.[9, 10] The CV is a comprehensive ontology—a dictionary of thousands of predefined, unambiguous, and machine-readable terms that describe every aspect of a mass spectrometry experiment.[10] This includes:</p>
<ul>
<li>Instrument components (e.g., “MS:1000031” for “quadrupole”)</li>
<li>Scan parameters (e.g., “MS:1000512” for “filter string”)</li>
<li>Data processing steps (e.g., “MS:1000035” for “centroiding”)</li>
<li>Data arrays (e.g., “MS:1000511” for “<span class="math inline">m/z</span> array”)</li>
</ul>
<p>Within an mzML file, metadata is not stored as ambiguous free text (e.g., “mass-to-charge”). Instead, it is encoded as a <code>cvParam</code> (Controlled Vocabulary Parameter) tag that references its exact CV accession number.[6, 11]</p>
<p>This semantic-first approach is the true genius of the mzML standard. It allows the XML schema to remain simple and stable, while the external CV can be constantly updated by the community to include new technologies, instruments, and quantification methods without breaking the file format.[6, 9, 10] It provides a mechanism to reduce ambiguity, ensure consistency, and allow software to validate that terms are being used correctly.[6, 12] This semantic backbone is what makes mzML a true standard, rather than just another format.</p>
<p><strong>Table 2: Overview of Key Open-Access Mass Spectrometry Formats</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Format Name</th>
<th style="text-align: left;">Key Feature</th>
<th style="text-align: left;">Current Status</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>mzData</strong></td>
<td style="text-align: left;">Early HUPO-PSI XML standard [6]</td>
<td style="text-align: left;">Deprecated (Superseded by mzML)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>mzXML</strong></td>
<td style="text-align: left;">Early ISB/SPC XML standard [6]</td>
<td style="text-align: left;">Legacy (Still in use, but mzML is preferred)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>mzML</strong></td>
<td style="text-align: left;">Unified HUPO-PSI XML standard [1, 6]</td>
<td style="text-align: left;"><strong>Current Standard</strong> (Exchange and Archival)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>MGF</strong></td>
<td style="text-align: left;">Mascot Generic Format. Simple text format for MS/MS peak lists only [2, 13]</td>
<td style="text-align: left;">Analysis-Specific (Used as input for search engines)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>imzML</strong></td>
<td style="text-align: left;">Dual-file format (XML + binary) for imaging MS [14, 15]</td>
<td style="text-align: left;"><strong>Current Standard (Imaging)</strong></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>mzMLb</strong></td>
<td style="text-align: left;">HDF5-based container embedding mzML metadata [16]</td>
<td style="text-align: left;">Emerging (High-performance successor to mzML)</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="fundamental-data-concepts-deconstructing-the-mass-spectrum" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="fundamental-data-concepts-deconstructing-the-mass-spectrum"><span class="header-section-number">4.2</span> Fundamental Data Concepts: Deconstructing the Mass Spectrum</h2>
<p>To work with any data format, one must first understand the fundamental structure of the data itself. A raw MS file is not a single spectrum, but a collection of thousands of individual spectra acquired sequentially over the course of an experiment.[17] Each spectrum is, in turn, a snapshot of the ions detected at a specific moment. This data can be represented in two primary ways: profile or centroid.</p>
<section id="profile-vs.-centroid-the-raw-signal-and-its-abstraction" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="profile-vs.-centroid-the-raw-signal-and-its-abstraction"><span class="header-section-number">4.2.1</span> Profile vs.&nbsp;Centroid: The Raw Signal and Its Abstraction</h3>
<p>The distinction between profile and centroid data represents the first, most critical, and often irreversible processing step in mass spectrometry analysis.</p>
<ul>
<li><p><strong>Profile Mode:</strong> This is the “raw” data as collected by the instrument’s detector.[18] It represents the signal as a continuous wave form, where a single ion “peak” is a Gaussian-like shape captured over several scans or data points.[19, 20]</p>
<ul>
<li><strong>Advantage:</strong> It contains all the original information, including peak shape. This makes it easier to algorithmically or visually distinguish a true ion signal from electronic noise.[20]</li>
<li><strong>Disadvantage:</strong> The files are enormous, as it takes many data points to describe a single peak.[20, 21]</li>
</ul></li>
<li><p><strong>Centroid Mode:</strong> This is a processed, “peak-picked” abstraction of profile data.[18, 19] A centroiding algorithm analyzes the profile-mode wave forms, identifies the “true” peaks, and reduces each one to a single, discrete bar.[22] This bar is represented by two values:</p>
<ol type="1">
<li>A single mass-to-charge ratio (the center, or “centroid,” of the profile peak).[19]</li>
<li>A single intensity (often the calculated <em>area</em> or height of the original profile peak).[19]</li>
</ol>
<!-- end list -->
<ul>
<li><strong>Advantage:</strong> File sizes are “significantly smaller”.[20, 21]
<ul>
<li><strong>Requirement:</strong> Most downstream analysis algorithms, such as proteomics search engines (e.g., Mascot, Sequest) or feature finders (e.g., <code>centWave</code>), <em>require</em> data to be in centroid mode.[18]</li>
</ul></li>
</ul></li>
</ul>
<p>This transformation from profile to centroid is a destructive one; information about the peak shape and the original noise is lost.[21] The choice of <em>which</em> centroiding algorithm to use (e.g., one provided by the instrument vendor versus an open-source one) is a critical analytic variable, as some vendor-provided algorithms have been known to “generate centroided data of poor quality”.[18]</p>
<p><strong>Table 3: Profile vs.&nbsp;Centroid Data Comparison</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Profile Mode</th>
<th style="text-align: left;">Centroid Mode</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Data Representation</strong></td>
<td style="text-align: left;">Continuous wave form (“raw” signal) [19, 20]</td>
<td style="text-align: left;">Discrete <code>$m/z$</code>-intensity bars (“peak picked”) [19]</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Data Points per Peak</strong></td>
<td style="text-align: left;">Many</td>
<td style="text-align: left;">One</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>File Size</strong></td>
<td style="text-align: left;">Very large [20, 21]</td>
<td style="text-align: left;">Significantly smaller [20]</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Primary Use Case</strong></td>
<td style="text-align: left;">Signal/noise classification; high-resolution peak shape analysis [20]</td>
<td style="text-align: left;">Database searching; feature detection; quantification [18]</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Key Trade-off</strong></td>
<td style="text-align: left;">Retains all original information but is computationally intensive and large.</td>
<td style="text-align: left;">Loses peak-shape information but is efficient and required by most software.[18, 21]</td>
</tr>
</tbody>
</table>
</section>
<section id="anatomy-of-a-scan-core-data-arrays-mz-and-intensity" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="anatomy-of-a-scan-core-data-arrays-mz-and-intensity"><span class="header-section-number">4.2.2</span> Anatomy of a Scan: Core Data Arrays (m/z and Intensity)</h3>
<p>At its most basic level, a single mass spectrum (whether profile or centroid) is a histogram plotting the intensity of detected ions against their mass-to-charge ratio.[23, 24] This plot is defined by two fundamental, parallel arrays of numbers:</p>
<ol type="1">
<li><strong>The <span class="math inline">m/z</span> Array (x-axis):</strong> This array contains the mass-to-charge ratio (<span class="math inline">m/z</span>) values. The <span class="math inline">m/z</span> is the quantity measured by the mass analyzer, representing the ion’s mass (in Daltons) divided by its charge number.[23, 25]</li>
<li><strong>The Intensity Array (y-axis):</strong> This array contains the signal intensity, which represents the relative abundance or “number of ions detected” for the corresponding <span class="math inline">m/z</span> value in the other array.[24, 26]</li>
</ol>
<p>These two arrays—the list of <span class="math inline">m/z</span> values and their corresponding intensity values—form the “binary data” payload of a spectrum. They are the core scientific measurement.</p>
</section>
<section id="the-metadata-framework-scan-headers-and-controlled-vocabularies" class="level3" data-number="4.2.3">
<h3 data-number="4.2.3" class="anchored" data-anchor-id="the-metadata-framework-scan-headers-and-controlled-vocabularies"><span class="header-section-number">4.2.3</span> The Metadata Framework: Scan Headers and Controlled Vocabularies</h3>
<p>A raw data file, which may contain tens of thousands of individual scans, is scientifically useless without a metadata framework to organize it. The raw <span class="math inline">m/z</span> and intensity arrays are just an unordered heap of data without context. This context is provided by the <strong>scan header</strong> (also called “spectraData” [17]), which is a collection of metadata attached to <em>each</em> individual scan.</p>
<p>This metadata, which is what allows the reconstruction of the entire experiment, includes:</p>
<ul>
<li><strong>MS Level (<span class="math inline">msLevel</span>):</strong> An integer specifying the scan’s purpose.[17]
<ul>
<li><strong>MS1 (or MS):</strong> A “survey” scan that measures all ions entering the spectrometer at that moment.</li>
<li><strong>MS2 (or MS/MS):</strong> A “fragmentation” scan, where a specific ion from a previous MS1 scan (the “precursor”) is isolated, fragmented, and its fragments are measured.[27, 28] This is the scan used for peptide identification.</li>
</ul></li>
<li><strong>Retention Time (<span class="math inline">rtime</span>):</strong> The time (typically in minutes or seconds) at which the scan was acquired as compounds eluted from the liquid chromatography (LC) column.[17, 27] This temporal information is what allows the construction of chromatograms.[5]</li>
<li><strong>Scan Index/Number:</strong> A unique identifier or acquisition number for the scan within the run.[17]</li>
<li><strong>Precursor Information (for MS2 scans):</strong> This is the critical link back to the MS1 scan. It includes the <span class="math inline">m/z</span> of the precursor ion that was selected for fragmentation, its charge state, and the collision energy used to fragment it.[29, 27]</li>
</ul>
<p>This rich metadata framework is what structures the file. It allows an analysis program to ask scientifically relevant questions, such as “Plot the total ion current (sum of all intensities) against retention time” or “Find all MS2 scans that fragmented the ion at <span class="math inline">m/z</span> 456.7 between 30 and 31 minutes”.[30]</p>
</section>
</section>
<section id="iii.-the-data-conversion-workflow-the-proteowizard-msconvert-toolkit" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="iii.-the-data-conversion-workflow-the-proteowizard-msconvert-toolkit"><span class="header-section-number">4.3</span> III. The Data Conversion Workflow: The ProteoWizard msConvert Toolkit</h2>
<p>Given that nearly all instruments produce proprietary, “black box” data (Section I.A) and nearly all open-source analysis tools require open, “centroided” data (Section II.A), a robust conversion tool is the single most essential piece of the computational proteomics puzzle. That tool is <strong>ProteoWizard</strong>.[31]</p>
<section id="the-rosetta-stone-of-proteomics-msconvert" class="level3" data-number="4.3.1">
<h3 data-number="4.3.1" class="anchored" data-anchor-id="the-rosetta-stone-of-proteomics-msconvert"><span class="header-section-number">4.3.1</span> The “Rosetta Stone” of Proteomics: msConvert</h3>
<p>The ProteoWizard project provides a set of open-source, cross-platform software libraries and tools to facilitate proteomics data analysis.[31] The cornerstone of this project is the <strong><code>msconvert</code></strong> utility (a command-line tool) and its graphical counterpart, <strong><code>msConvertGUI</code></strong> (for Windows users).[32, 33]</p>
<p><code>msconvert</code> functions as the “Rosetta Stone” of proteomics. Its purpose is to read from the wide, disparate array of vendor-proprietary formats and convert them into a variety of open formats, including mzML, mzXML, and MGF.[32, 34, 35]</p>
<p>It achieves this, particularly on the Windows platform, by programmatically accessing the instrument vendors’ own software libraries (e.g., DLLs).[29, 33, 36] This is a crucial detail: it means <code>msconvert</code> can often perform “vendor-quality” data processing, such as centroiding, by asking the vendor’s own code to do it. This conversion is the mandatory “first step in many protocols” for data analysis.[34]</p>
</section>
<section id="practical-conversion-guide-command-line-options-and-filters" class="level3" data-number="4.3.2">
<h3 data-number="4.3.2" class="anchored" data-anchor-id="practical-conversion-guide-command-line-options-and-filters"><span class="header-section-number">4.3.2</span> Practical Conversion Guide: Command-Line Options and Filters</h3>
<p>The power of <code>msconvert</code> lies in the fact that it is not a simple 1-to-1 converter; it is a powerful data processing engine. This processing is applied through a series of “filters” that are applied sequentially during the conversion process.[32] The <em>order</em> in which filters are specified on the command line is critical and can dramatically affect the output.[36]</p>
<p>A complete list of filters can be obtained by running <code>msconvert --help</code> [33], but a few are essential for almost every workflow.</p>
<ul>
<li><p><strong><code>--filter "peakPicking [vendor|cwt] true &lt;msLevels&gt;"</code></strong>: This is the all-important centroiding filter.[35, 36, 37]</p>
<ul>
<li><code>[vendor]</code> (or <code>true</code>) is the recommended option. It instructs <code>msconvert</code> to use the vendor-provided centroiding algorithm.[36]</li>
<li><code>[cwt]</code> is an open-source wavelet-based algorithm, which is an alternative if vendor libraries are unavailable (e.g., on Linux).[36]</li>
<li><code>&lt;msLevels&gt;</code> is an integer set, such as <code>1-</code> (meaning MS level 1 and higher).[36]</li>
<li><strong>CRITICAL:</strong> If using the <code>vendor</code> option, this filter <em>must</em> be the first filter in the command. The vendor DLLs can only operate on the original, untransformed profile data.[36] Any other processing (like a threshold) applied first will “break” the vendor algorithm.</li>
</ul></li>
<li><p><strong><code>--filter "threshold &lt;type&gt; &lt;threshold&gt; &lt;orientation&gt;"</code></strong>: This is a versatile filter for removing noise.[35, 36]</p>
<ul>
<li><code>type</code>: Can be <code>absolute</code> (e.g., keep all peaks with intensity &gt; 1000) [38], <code>count</code> (e.g., keep the Top 100 most intense peaks), or <code>bpi-relative</code> (e.g., keep peaks that are at least 0.5% of the base peak intensity).[35]</li>
<li><code>orientation</code>: <code>most-intense</code> (keep above threshold) or <code>least-intense</code> (keep below).[35, 36]</li>
</ul></li>
<li><p><strong><code>--filter "msLevel &lt;msLevels&gt;"</code></strong>: This filter selects <em>only</em> the scans of a given MS level.[36, 38] For example, <code>--filter "msLevel 2-"</code> would create a file containing <em>only</em> the MS2 and higher-level scans, which is often done to create a small MGF file for database searching.</p></li>
</ul>
<p>In addition to filters, several output options are key for managing file size:</p>
<ul>
<li><strong><code>--mzML</code></strong>: Specifies the output format as mzML.[33]</li>
<li><strong><code>--zlib</code></strong>: Applies <code>zlib</code> compression to the binary data arrays (m/z, intensity) before they are Base64-encoded. This significantly reduces file size and is highly recommended.[35, 39]</li>
<li><strong><code>--32</code></strong>: Writes binary data using 32-bit (single) precision for intensities instead of the default 64-bit (double) precision. This halves the size of the intensity array with almost no loss of meaningful scientific precision.[35, 37]</li>
<li><strong><code>--numpress...</code></strong>: Applies Numpress, a specialized and highly efficient (and sometimes lossy) compression scheme for MS data, resulting in even smaller files.[37]</li>
</ul>
<p><strong>Table 4: Essential msConvert Filters for Data Processing</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Filter Name</th>
<th style="text-align: left;">Example Argument</th>
<th style="text-align: left;">Purpose / Effect on Data</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong><code>peakPicking</code></strong></td>
<td style="text-align: left;"><code>"peakPicking vendor true 1-"</code></td>
<td style="text-align: left;"><strong>(Centroiding)</strong> Converts profile data to centroid data using the vendor’s algorithm for all MS levels. Must be the first filter.[36]</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong><code>threshold</code></strong></td>
<td style="text-align: left;"><code>"threshold absolute 1000 most-intense"</code></td>
<td style="text-align: left;"><strong>(Noise Filtering)</strong> Keeps only data points with an absolute intensity &gt; 1000.[36, 38]</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong><code>threshold</code></strong></td>
<td style="text-align: left;"><code>"threshold bpi-relative 0.01 most-intense"</code></td>
<td style="text-align: left;"><strong>(Noise Filtering)</strong> Keeps only peaks that are at least 1% of the base peak’s intensity in that scan.[35, 36]</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong><code>msLevel</code></strong></td>
<td style="text-align: left;"><code>"msLevel 2-"</code></td>
<td style="text-align: left;"><strong>(Scan Selection)</strong> Creates an output file containing <em>only</em> MS2 and higher-level (e.g., MS3) scans.[36, 38]</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong><code>scanTime</code></strong></td>
<td style="text-align: left;"><code>"scanTime [30.0, 60.0]"</code></td>
<td style="text-align: left;"><strong>(Scan Selection)</strong> Selects only scans acquired between 30 and 60 minutes of retention time.[36]</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong><code>mzWindow</code></strong></td>
<td style="text-align: left;"><code>"mzWindow "</code></td>
<td style="text-align: left;"><strong>(Data Reduction)</strong> Selects only data points within the <span class="math inline">m/z</span> range of 400 to 1200, discarding the rest.[36]</td>
</tr>
</tbody>
</table>
</section>
<section id="tutorial-a-reproducible-conversion-from-vendor-raw-to-centroided-mzml" class="level3" data-number="4.3.3">
<h3 data-number="4.3.3" class="anchored" data-anchor-id="tutorial-a-reproducible-conversion-from-vendor-raw-to-centroided-mzml"><span class="header-section-number">4.3.3</span> Tutorial: A Reproducible Conversion from Vendor RAW to Centroided mzML</h3>
<p>This example demonstrates a best-practice, single-line command for converting a vendor’s raw file (e.g., a Thermo <code>.RAW</code> file) into an analysis-ready, centroided, compressed, and filtered mzML file.</p>
<p><strong>Use Case:</strong> Converting a Thermo <code>.RAW</code> file for use in an open-source quantification pipeline.</p>
<p><strong>Command (for Windows Command Prompt):</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">msconvert.exe</span> <span class="st">"C:\data\MyExperiment.raw"</span> ^</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="ex">--filter</span> <span class="st">"peakPicking vendor true 1-"</span> ^</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="ex">--filter</span> <span class="st">"threshold bpi-relative 0.005 most-intense"</span> ^</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="ex">--32</span> ^</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="ex">--zlib</span> ^</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="ex">--mzML</span> ^</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="ex">-o</span> <span class="st">"C:\data\processed</span><span class="dt">\"</span></span></code></pre></div>
<p><strong>Explanation of Command:</strong></p>
<ol type="1">
<li><code>msconvert.exe "C:\data\MyExperiment.raw"</code>: Specifies the <code>msconvert</code> program and the input file.[35]</li>
<li><code>--filter "peakPicking vendor true 1-"</code>: The <strong>first</strong> filter. It applies the vendor’s centroiding algorithm to all MS levels.[36]</li>
<li><code>--filter "threshold bpi-relative 0.005 most-intense"</code>: The <strong>second</strong> filter. <em>After</em> centroiding, it removes all “noise” peaks that are less than 0.5% of the intensity of the base peak for that scan.[35, 36]</li>
<li><code>--32</code>: Specifies 32-bit precision for output data arrays.[35]</li>
<li><code>--zlib</code>: Applies <code>zlib</code> compression.[35]</li>
<li><code>--mzML</code>: Specifies the output format.[33]</li>
<li><code>-o "C:\data\processed\"</code>: Specifies the output directory. The output file will be named <code>MyExperiment.mzML</code>.[35]</li>
</ol>
</section>
</section>
<section id="deep-dive-key-open-formats-and-their-internal-structures" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="deep-dive-key-open-formats-and-their-internal-structures"><span class="header-section-number">4.4</span> Deep Dive: Key Open Formats and Their Internal Structures</h2>
<p>While <code>msconvert</code> shields the user from the complexity of most formats, a deeper understanding of <em>how</em> these files are structured is essential for advanced analysis, troubleshooting, and pipeline development.</p>
<section id="thermo.raw-and-the-thermorawfileparser" class="level3" data-number="4.4.1">
<h3 data-number="4.4.1" class="anchored" data-anchor-id="thermo.raw-and-the-thermorawfileparser"><span class="header-section-number">4.4.1</span> Thermo.raw and the ThermoRawFileParser</h3>
<p>The Thermo <code>.RAW</code> file format warrants a special discussion due to its market dominance and the unique history of its “liberation.” For years, <code>.RAW</code> files were a “hard” proprietary format, accessible only through Thermo’s libraries, which were exclusively available on Microsoft Windows. This single fact was a major anchor holding the field of computational proteomics to the Windows operating system, preventing a full migration to more scalable Linux-based high-performance computing (HPC) clusters and cloud resources.[2]</p>
<p>A major breakthrough occurred when Thermo Scientific released a cross-platform application programming interface (API) that enabled access to <code>.RAW</code> files on Linux, Mac, and Windows.[2]</p>
<p>This API was leveraged by the open-source community to build <strong><code>ThermoRawFileParser</code></strong>, an open-source, cross-platform tool that directly converts <code>.RAW</code> files into open formats (mzML, MGF, etc.).[2, 40] This tool, and its packaging into user-friendly interfaces [40], containers [2], and its integration into major workflow systems like Galaxy and Nextflow, effectively “decoupled” Thermo data analysis from the Windows OS, enabling the entire field to move toward modern, scalable, and elastic compute environments.[2]</p>
</section>
<section id="the-workhorse-mzml-internal-structure" class="level3" data-number="4.4.2">
<h3 data-number="4.4.2" class="anchored" data-anchor-id="the-workhorse-mzml-internal-structure"><span class="header-section-number">4.4.2</span> The Workhorse: mzML Internal Structure</h3>
<p>The <code>mzML</code> format is a single, text-based XML file. This structure is human-readable (with difficulty) and, most importantly, machine-readable, as its structure is defined by a strict XML schema.[41]</p>
<p>An mzML file is composed of two main sections:</p>
<ol type="1">
<li><p><strong>Metadata Header:</strong> The top of the file contains extensive metadata, including:</p>
<ul>
<li><strong><code>&lt;cvList&gt;</code>:</strong> A list of all Controlled Vocabularies used in the file (e.g., the PSI-MS CV).[42]</li>
<li><strong><code>&lt;instrumentConfiguration&gt;</code>:</strong> A detailed description of the instrument used, including its components (source, analyzer, detector).[41]</li>
<li><strong><code>&lt;dataProcessing&gt;</code>:</strong> A list of processing steps applied to the data. This creates a “chain of custody.” For example, a file converted by <code>msconvert</code> will have an entry describing the <code>msconvert</code> version and the filters that were applied.[41]</li>
<li><strong><code>&lt;run&gt;</code>:</strong> This tag contains the actual experimental data.[6]</li>
</ul></li>
<li><p><strong>Data Section (<code>&lt;spectrumList&gt;</code>):</strong></p>
<ul>
<li>This section, nested within <code>&lt;run&gt;</code>, is a long list of <code>&lt;spectrum&gt;</code> elements.[6]</li>
<li>Each <strong><code>&lt;spectrum&gt;</code></strong> element corresponds to one scan (one <span class="math inline">m/z</span>-intensity pair). It contains the scan’s header metadata (e.g., MS level, retention time) encoded as <code>cvParam</code> tags.[11]</li>
<li>Inside the <code>&lt;spectrum&gt;</code> tag are the <strong><code>&lt;binaryDataArray&gt;</code></strong> elements.[42] This is where the actual scientific measurement is stored. The <span class="math inline">m/z</span> array and the intensity array are stored separately.</li>
<li>To embed this high-volume numerical data into a text-based XML file, the arrays are first (optionally) compressed with <code>zlib</code>, and then the resulting binary data is encoded into a long text string using <strong>Base64</strong>.[7, 43]</li>
</ul></li>
</ol>
<p>This XML/Base64 design is the source of mzML’s greatest strength (interoperability, human-readability) and its greatest weakness (file size and access speed). The Base64-encoding step inflates the binary data, and parsing a massive text file to find one spectrum is very slow.[7, 16]</p>
<p>To address the slowness, an optional <strong>index</strong> can be added. A file with this index is wrapped in <code>&lt;indexedmzML&gt;</code> tags. This index, stored at the <em>end</em> of the file, contains the byte-offset for every <code>&lt;spectrum&gt;</code> tag, allowing a parser to “seek” directly to a specific spectrum (e.g., “spectrum number 18,345”) without reading the entire file sequentially.[6, 7] The benefits of this random-access capability are “enormous” for analysis software.[6, 7]</p>
</section>
<section id="the-spatial-dimension-imzml-for-mass-spectrometry-imaging" class="level3" data-number="4.4.3">
<h3 data-number="4.4.3" class="anchored" data-anchor-id="the-spatial-dimension-imzml-for-mass-spectrometry-imaging"><span class="header-section-number">4.4.3</span> The Spatial Dimension: imzML for Mass Spectrometry Imaging</h3>
<p>Mass Spectrometry Imaging (MSI) is a technique that generates thousands of spectra, one for each “pixel” on a 2D sample surface.[15] The resulting datasets are often orders of magnitude larger than a typical LC-MS run, reaching terabytes in size, and must be correlated with spatial (x, y) coordinates.[14, 44]</p>
<p>The mzML format, with its inefficient XML/Base64 structure, is completely unsuitable for this task. The community, therefore, developed <strong>imzML</strong>.[14, 15] The design of imzML is a clear and logical solution to the problem of separating metadata from high-volume binary data:</p>
<ol type="1">
<li><strong><code>.imzML</code> file:</strong> This is a text-based XML file that is 100% compliant with the mzML schema.[15, 45] It contains <em>all</em> the metadata for the <em>entire</em> experiment, including instrument configuration, data processing steps, and a <code>&lt;spectrum&gt;</code> entry for every single pixel.</li>
<li><strong>Spatial Data:</strong> The mzML controlled vocabulary was extended to include new <code>cvParam</code> tags for the x and y coordinates of each spectrum (pixel).[15]</li>
<li><strong><code>.ibd</code> file (imaging binary data):</strong> This is a single, separate, highly-efficient binary file.[45, 46, 47] It contains <em>only</em> the raw, packed <span class="math inline">m/z</span> and intensity arrays for all the spectra, concatenated together.</li>
</ol>
<p>The “magic” of imzML is in how these two files are linked. The <code>&lt;binaryDataArray&gt;</code> tags in the <code>.imzML</code> metadata file are <em>empty</em>. Instead, they contain <code>cvParam</code> tags that specify the exact byte-offset and length of that spectrum’s data within the external <code>.ibd</code> file.[15, 48]</p>
<p>This dual-file architecture is highly efficient. An analysis program [49, 50] can load the small <code>.imzML</code> file into memory, display the 2D image metadata, and when a user clicks a pixel, the software can <em>immediately</em> seek to the corresponding position in the massive <code>.ibd</code> file and read <em>only</em> the data for that single pixel, without ever loading the full terabyte file.</p>
</section>
<section id="the-future-high-performance-formats-mzmlb-and-mzpeak" class="level3" data-number="4.4.4">
<h3 data-number="4.4.4" class="anchored" data-anchor-id="the-future-high-performance-formats-mzmlb-and-mzpeak"><span class="header-section-number">4.4.4</span> The Future: High-Performance Formats (mzMLb and mzPeak)</h3>
<p>The evolutionary design pattern of separating metadata from binary data, first seen in imzML, has been perfected in the next generation of file formats. The XML/Base64 design of mzML is a known bottleneck, leading to file sizes much larger than the original vendor format and slow parsing speeds.[16, 44]</p>
<p><strong>mzMLb:</strong> This format is the direct successor to mzML. It is not a new invention, but a refinement. It is a single <code>.mzMLb</code> file that is internally an <strong>HDF5 container</strong>.[16] HDF5 is a file format standard designed specifically for storing and organizing large amounts of scientific data.</p>
<p>The <code>mzMLb</code> file stores:</p>
<ol type="1">
<li><strong>The Binary Data:</strong> The <span class="math inline">m/z</span> and intensity arrays are stored as native, compressed binary datasets within the HDF5 structure.[16] This is extremely fast to read and write and results in file sizes comparable to or smaller than the original proprietary vendor files.[16]</li>
<li><strong>The Metadata:</strong> The <em>entire, original mzML XML text</em> is stored as a separate text dataset <em>within</em> the same HDF5 file.[16]</li>
</ol>
<p>This “best of both worlds” approach gives the full metadata fidelity, standards-compliance, and “chain of custody” of the mzML XML, while simultaneously providing the “significantly faster” read/write speed and compact file size of a true binary format.[16]</p>
<p><strong>mzPeak:</strong> This is a more recent proposal for a next-generation community format, also designed to address the data-deluge challenges of speed, size, and complexity for multidimensional MS workflows.[44]</p>
<p>This evolution highlights a critical trend: the need for fast, random access (seeking) is a non-negotiable requirement for modern, large-scale analysis. The original, sequential-parse model of XML is obsolete, and the future of MS data formats is built on indexed, random-access binary containers.</p>
</section>
</section>
<section id="acquisition-mode-and-file-structure-dda-vs.-dia" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="acquisition-mode-and-file-structure-dda-vs.-dia"><span class="header-section-number">4.5</span> Acquisition Mode and File Structure: DDA vs.&nbsp;DIA</h2>
<p>The structure of a mass spectrometry file is also fundamentally dictated by the <em>acquisition strategy</em> used on the instrument. The two most dominant strategies in proteomics are Data-Dependent Acquisition (DDA) and Data-Independent Acquisition (DIA). An analysis program <em>must</em> know which type of file it is reading, and this distinction is encoded <em>only</em> in the scan header metadata.</p>
<section id="data-dependent-acquisition-dda" class="level3" data-number="4.5.1">
<h3 data-number="4.5.1" class="anchored" data-anchor-id="data-dependent-acquisition-dda"><span class="header-section-number">4.5.1</span> Data-Dependent Acquisition (DDA)</h3>
<p>DDA, also known as “shotgun proteomics,” is the classic method.[51] It operates on a “Top N” logic:</p>
<ol type="1">
<li>The instrument performs a high-resolution <strong>MS1</strong> survey scan.</li>
<li>Software in the instrument <em>algorithmically</em> identifies the “Top N” most intense ions (e.g., N=10 or 20) in that MS1 scan.[52, 53]</li>
<li>The instrument then performs N discrete <strong>MS2</strong> fragmentation scans, one for each of those “Top N” precursors, before looping back for the next MS1 scan.[53]</li>
</ol>
<p><strong>File Structure Implication:</strong> The resulting data file is a highly structured list of scans: one MS1 scan, followed by N MS2 scans. The critical metadata is in the MS2 scan header. In the mzML file, the <code>&lt;precursor&gt;</code> tag for a DDA MS2 scan will contain a <code>&lt;selectedIon&gt;</code> tag with the <em>single, specific <span class="math inline">m/z</span> and charge state</em> of the ion that was “cherry-picked” for fragmentation.[54, 55] Analysis software can therefore unambiguously associate that MS2 spectrum with that one precursor peptide.[56]</p>
<p>The primary drawback of DDA is that this precursor selection is stochastic. A peptide that is “Top N” in one run may not be in the next, especially if it is of lower abundance. This leads to “missing data” and low reproducibility between runs.[51]</p>
</section>
<section id="data-independent-acquisition-dia" class="level3" data-number="4.5.2">
<h3 data-number="4.5.2" class="anchored" data-anchor-id="data-independent-acquisition-dia"><span class="header-section-number">4.5.2</span> Data-Independent Acquisition (DIA)</h3>
<p>DIA was developed specifically to solve the “missing data” and reproducibility problems of DDA.[57, 58] It is a systematic, non-stochastic method:</p>
<ol type="1">
<li>The instrument performs a high-resolution <strong>MS1</strong> survey scan.</li>
<li>Instead of picking “Top N” ions, the instrument systematically steps through a series of wide, predefined isolation windows (e.g., 25 Da wide).[52]</li>
<li>It performs an <strong>MS2</strong> scan on <em>everything</em> within the first window (e.g., 500-525 <span class="math inline">m/z</span>), then <em>everything</em> within the next window (e.g., 525-550 <span class="math inline">m/z</span>), and so on, until the entire mass range has been covered.[51, 52, 59]</li>
</ol>
<p><strong>File Structure Implication:</strong> The file structure is again a series of MS1 and MS2 scans.[54] However, the MS2 scans are <em>semantically different</em>. In the mzML file, the <code>&lt;precursor&gt;</code> tag for a DIA MS2 scan does <em>not</em> contain a single selected ion. Instead, its <code>&lt;isolationWindow&gt;</code> tag will define the <em>wide <span class="math inline">m/z</span> range</em> that was fragmented.</p>
<p>The resulting MS2 <span class="math inline">m/z</span>-intensity array is therefore a “chimeric” or “multiplexed” spectrum, containing a complex mixture of fragments from <em>all</em> precursor peptides that happened to be in that isolation window at that retention time.[56]</p>
</section>
<section id="c.-implications-for-data-format-and-import" class="level3" data-number="4.5.3">
<h3 data-number="4.5.3" class="anchored" data-anchor-id="c.-implications-for-data-format-and-import"><span class="header-section-number">4.5.3</span> C. Implications for Data Format and Import</h3>
<p>DIA provides a “more complete data matrix” [57] and is highly reproducible [59], but it comes at the cost of much larger files and a “complicated data analysis” challenge.[51]</p>
<p>An analysis tool cannot treat a DIA file the same as a DDA file. A DDA search engine (which follows a “one-peptide-per-spectrum” paradigm) will fail completely on a chimeric DIA spectrum.[56]</p>
<p>Therefore, a parser’s first job is to read the scan header metadata to determine the file type.[60]</p>
<ul>
<li>If the MS2 precursor metadata specifies a <em>single ion</em>, the file is <strong>DDA</strong>.</li>
<li>If the MS2 precursor metadata specifies a <em>wide isolation window</em>, the file is <strong>DIA</strong>.</li>
</ul>
<p>This distinction dictates the entire downstream analysis. DIA data requires specialized deconvolution algorithms and “spectral libraries” (libraries of known peptide fragmentation patterns) to computationally extract the individual peptide signals from the complex chimeric spectra.[52, 56, 61, 62] Even the <code>msconvert</code> step can be different, sometimes requiring special flags like <code>SIM as spectra</code> to properly handle DIA data [63] or demultiplexing steps if overlapping windows were used.[64]</p>
</section>
</section>
<section id="programmatic-data-import-and-analysis" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="programmatic-data-import-and-analysis"><span class="header-section-number">4.6</span> Programmatic Data Import and Analysis</h2>
<p>For large-scale, automated, and reproducible data analysis, researchers must move beyond graphical tools and access data programmatically. The Python and R/Bioconductor ecosystems provide mature, powerful libraries for this purpose.</p>
<section id="python-ecosystem-pymzml" class="level3" data-number="4.6.1">
<h3 data-number="4.6.1" class="anchored" data-anchor-id="python-ecosystem-pymzml"><span class="header-section-number">4.6.1</span> Python Ecosystem: pymzML</h3>
<p><code>pymzML</code> is a highly optimized, dedicated Python parser for <code>mzML</code> data.[65, 66] It is fast, efficient, and designed to make reading mzML files as simple as possible.</p>
<ul>
<li><strong>Core Function:</strong> It provides an easy-to-use <code>Reader</code> class that functions as an iterator. A user can simply loop through all spectra in a file.[67, 68]</li>
<li><strong>Key Feature (Random Access):</strong> Its most powerful feature is the “magic get function” (using Python’s square-bracket `` syntax) that allows <em>direct, random access</em> to any spectrum by its ID or scan number.[68] This is extremely fast, as it uses the file’s index (if present) to seek directly to the data.</li>
<li><strong>Indexed Gzip (<code>igzip</code>):</strong> To solve the problem of seeking in compressed files (which is normally impossible), <code>pymzML</code> also provides tools to create and read a custom “indexed gzip” (<code>.mzML.gz</code>) format, which bundles a seek-index with the compressed file.[68, 69]</li>
</ul>
<p><strong>Code Example (Iteration and Seeking):</strong></p>
</section>
<section id="python-ecosystem-pyteomics" class="level3" data-number="4.6.2">
<h3 data-number="4.6.2" class="anchored" data-anchor-id="python-ecosystem-pyteomics"><span class="header-section-number">4.6.2</span> Python Ecosystem: pyteomics</h3>
<p><code>pyteomics</code> is not just an mzML parser, but a comprehensive, Swiss-army-knife toolkit for computational proteomics.[70, 71] It provides modules for reading a wide variety of file formats, including <code>pyteomics.mzml</code>, <code>pyteomics.mgf</code>, <code>pyteomics.ms1</code>/<code>ms2</code>, <code>pyteomics.pepxml</code> (for search results), and more.[13, 72, 73, 74]</p>
<ul>
<li><strong>Core Function:</strong> Its philosophy is to parse data into simple, standard Python data structures (dictionaries), which integrates seamlessly with the scientific Python stack (Numpy, Pandas, Matplotlib).[70, 75]</li>
<li><strong>Key Feature (Chaining):</strong> The <code>chain</code> function allows a user to treat <em>multiple</em> data files as a single, continuous iterable, which is invaluable for batch processing.[13, 74]</li>
</ul>
<p><strong>Code Example (Reading an MGF file):</strong></p>
</section>
<section id="rbioconductor-ecosystem-mzr" class="level3" data-number="4.6.3">
<h3 data-number="4.6.3" class="anchored" data-anchor-id="rbioconductor-ecosystem-mzr"><span class="header-section-number">4.6.3</span> R/Bioconductor Ecosystem: mzR</h3>
<p>For researchers in the R and Bioconductor environment, <strong><code>mzR</code></strong> is the standard, high-performance package for raw MS data access.[76]</p>
<ul>
<li><strong>Core Function:</strong> <code>mzR</code> uses the same C++ ProteoWizard libraries as <code>msconvert</code> for its backend.[77] This means it can open and read <em>all</em> the same file formats, including proprietary vendor files (on Windows) and open formats like mzML and mzXML.[77]</li>
<li><strong>Key Feature (On-Disk Access):</strong> This is the most important concept to understand about <code>mzR</code>. R traditionally prefers to load all data into memory, which is impossible for 50 GB MS files. <code>mzR</code> solves this by <em>not</em> loading the file. Data is accessed <strong>on-disk</strong> by default.[77] This “on-disk” strategy is the enabling technology for R to handle modern MS data without crashing.</li>
<li><strong>The Standard Workflow:</strong> The <code>mzR</code> workflow is a three-step, “on-demand” process that reflects this on-disk philosophy:
<ol type="1">
<li><code>ms &lt;- openMSfile("example.mzML")</code>: This creates a “file handle” (<code>ms</code>). No spectral data is loaded into memory.[77]</li>
<li><code>hd &lt;- header(ms)</code>: This function call reads <em>only</em> the metadata headers for <em>all</em> scans in the file, returning a very useful and memory-efficient <code>data.frame</code>.[17, 77]</li>
<li><code>pks &lt;- peaks(ms, c(1, 5, 10))</code>: This function call seeks into the file on-disk and retrieves the <span class="math inline">m/z</span>-intensity data for <em>only</em> the specified scans (in this case, 1, 5, and 10).[77]</li>
</ol></li>
</ul>
<p><strong>Code Example (R Workflow):</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Safely demonstrate the mzR workflow only if the data is available locally.</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Avoid installing packages during render; instead, skip gracefully when missing.</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"mzR"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>) <span class="sc">||</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"RforProteomics"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">"mzR / RforProteomics not installed; skipping mzR example."</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(<span class="st">"mzR"</span>)             <span class="co"># [77]</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(<span class="st">"RforProteomics"</span>)  <span class="co"># [17]</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Retrieve the example mzML file bundled with RforProteomics [17, 77]</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  f <span class="ot">&lt;-</span> <span class="fu">system.file</span>(</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"TMT_Erwinia_1uLSike_Top10HCD_isol2_45stepped_60min_01-20141210.mzML.gz"</span>,</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">package =</span> <span class="st">"RforProteomics"</span>,</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">mustWork =</span> <span class="cn">FALSE</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">nzchar</span>(f) <span class="sc">||</span> <span class="fu">is.na</span>(f) <span class="sc">||</span> <span class="sc">!</span><span class="fu">file.exists</span>(f)) {</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">"Sample TMT_Erwinia mzML file not found; skipping mzR example."</span>)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="fu">paste</span>(<span class="st">"Using file:"</span>, f))</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create the on-disk file handle (no full data load) [77]</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    ms <span class="ot">&lt;-</span> <span class="fu">openMSfile</span>(f) [<span class="dv">77</span>]</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(ms)</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract the header for ALL scans as a data.frame [77]</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>    hd <span class="ot">&lt;-</span> <span class="fu">header</span>(ms) [<span class="dv">77</span>]</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Total scans in file:"</span>, <span class="fu">nrow</span>(hd)))</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">"Header columns:"</span>)</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">names</span>(hd)) <span class="co"># Show all metadata columns [77]</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Use the header to perform analysis [17, 77]</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">"Scan counts by MS Level:"</span>)</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">table</span>(hd<span class="sc">$</span>msLevel)) [<span class="dv">17</span>]</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot Total Ion Current (TIC) vs. Retention Time (in minutes)</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot</span>(hd<span class="sc">$</span>retentionTime <span class="sc">/</span> <span class="dv">60</span>, hd<span class="sc">$</span>totIonCurrent, <span class="at">type =</span> <span class="st">"l"</span>,</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>         <span class="at">xlab =</span> <span class="st">"Retention Time (min)"</span>, <span class="at">ylab =</span> <span class="st">"Total Ion Current"</span>,</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>         <span class="at">main =</span> <span class="st">"Total Ion Chromatogram (TIC)"</span>)</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract peak data for an MS2 scan (on-demand) [77]</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>    ms2_scan_indices <span class="ot">&lt;-</span> <span class="fu">which</span>(hd<span class="sc">$</span>msLevel <span class="sc">==</span> <span class="dv">2</span>)</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>    target_scan_index <span class="ot">&lt;-</span> ms2_scan_indices[<span class="dv">1</span>] <span class="co"># Take the first available MS2 scan</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>    spectrum_data <span class="ot">&lt;-</span> <span class="fu">peaks</span>(ms, target_scan_index) [<span class="dv">77</span>]</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Plotting spectrum for scan number:"</span>, hd<span class="sc">$</span>acquisitionNum[target_scan_index]))</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot</span>(spectrum_data, <span class="at">type =</span> <span class="st">"h"</span>, <span class="at">xlab =</span> <span class="st">"m/z"</span>, <span class="at">ylab =</span> <span class="st">"Intensity"</span>,</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>         <span class="at">main =</span> <span class="fu">paste</span>(<span class="st">"MS2 Spectrum - Scan"</span>, hd<span class="sc">$</span>acquisitionNum[target_scan_index]))</span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Close the file handle</span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">close</span>(ms)</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</details>
</div>
<p><strong>Table 5: Comparison of Python and R Libraries for MS Data Access</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Language</th>
<th style="text-align: left;">Library</th>
<th style="text-align: left;">Core Function / Paradigm</th>
<th style="text-align: left;">Supported Formats</th>
<th style="text-align: left;">Key Feature(s)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Python</strong></td>
<td style="text-align: left;"><strong><code>pymzML</code></strong></td>
<td style="text-align: left;">Fast, dedicated <code>mzML</code> parser (Iterative) [65]</td>
<td style="text-align: left;">mzML, mzML.gz, igzip</td>
<td style="text-align: left;"><strong>Random Access (Seeking):</strong> <code>run</code> [68]<br><strong><code>igzip</code>:</strong> Fast seeking in compressed files [68]</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Python</strong></td>
<td style="text-align: left;"><strong><code>pyteomics</code></strong></td>
<td style="text-align: left;">General proteomics toolkit (Iterative) [70]</td>
<td style="text-align: left;">mzML, MGF, MS1/MS2, pepXML, etc. [13, 74]</td>
<td style="text-align: left;"><strong>Broad Format Support</strong><br><strong><code>chain()</code>:</strong> Iterate over multiple files [13, 74]</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>R</strong></td>
<td style="text-align: left;"><strong><code>mzR</code></strong></td>
<td style="text-align: left;">Bioconductor standard interface (On-demand/Handle) [76]</td>
<td style="text-align: left;">All ProteoWizard-supported formats (mzML,.RAW,.WIFF, etc.) [77]</td>
<td style="text-align: left;"><strong>On-Disk Access:</strong> Does not load full file [77]<br><strong>Workflow:</strong> <code>openMSfile()</code> -&gt; <code>header()</code> -&gt; <code>peaks()</code> [77]</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="vii.-best-practices-for-data-management-and-reproducibility" class="level2" data-number="4.7">
<h2 data-number="4.7" class="anchored" data-anchor-id="vii.-best-practices-for-data-management-and-reproducibility"><span class="header-section-number">4.7</span> VII. Best Practices for Data Management and Reproducibility</h2>
<p>The ultimate goal of any scientific data workflow is to produce reliable, verifiable, and reproducible results. The “big data” age of proteomics, characterized by massive data volumes and complex processing, poses a direct threat to this goal.[29, 2, 44] Effective data management is not an administrative task; it is a core component of the scientific method.</p>
<section id="a.-addressing-the-data-deluge-storage-and-access" class="level3" data-number="4.7.1">
<h3 data-number="4.7.1" class="anchored" data-anchor-id="a.-addressing-the-data-deluge-storage-and-access"><span class="header-section-number">4.7.1</span> A. Addressing the Data Deluge: Storage and Access</h3>
<p>Modern instruments generate data at an unprecedented rate, and formats like mzML, while open, exacerbate storage problems dueTo their text-based, Base64-encoded structure.[16, 44]</p>
<p><strong>Best Practices for Data Handling:</strong></p>
<ol type="1">
<li><strong>Convert and Centroid Immediately:</strong> As a rule, raw vendor files should be converted to an open format upon acquisition.[33] During this conversion, apply “gold standard” vendor centroiding (<code>--filter "peakPicking vendor..."</code>). Unless profile-mode analysis is specifically required, the large, centroided mzML file should become the new “raw” file, and the original, multi-gigabyte profile-mode file can be moved to long-term “cold” storage or archival.</li>
<li><strong>Filter and Compress:</strong> The conversion step <em>is</em> the data reduction step. Applying noise filters (<code>threshold</code>) and compression (<code>--zlib</code>, <code>--32</code>) is essential for manageability.[35, 39]</li>
<li><strong>Adopt Modern Formats:</strong> For new, large-scale projects, pipelines should be built to support <code>mzMLb</code>. Its use of HDF5 solves the file size and access speed bottlenecks of mzML, resulting in files that are comparable in size to the original vendor data but are fully open, standardized, and fast to access.[16]</li>
<li><strong>Use Public Repositories:</strong> Data dissemination should be done through dedicated public repositories like PRIDE (part of ProteomeXchange), jPOSTrepo, or MassIVE.[76, 78] These platforms are designed to handle high-speed uploads and management of these large files and are the foundation of data-driven collaboration.[78]</li>
</ol>
</section>
<section id="b.-ensuring-transparent-and-reproducible-analysis" class="level3" data-number="4.7.2">
<h3 data-number="4.7.2" class="anchored" data-anchor-id="b.-ensuring-transparent-and-reproducible-analysis"><span class="header-section-number">4.7.2</span> B. Ensuring Transparent and Reproducible Analysis</h3>
<p>The greatest barrier to reproducibility is the use of “black box” proprietary software or undocumented “in-house scripts” for analysis.[79] A result is not reproducible if another scientist cannot access both the original data and the exact, version-controlled analysis pipeline used to generate that result.[80]</p>
<p>The entire ecosystem described in this report—from standards bodies to file formats to open-source tools—is a real-world implementation of the <strong>FAIR Data Principles</strong> (Findable, Accessible, Interoperable, and Re-usable).[79]</p>
<ul>
<li><strong>Findable:</strong> Data is deposited in a public repository (PRIDE) with rich metadata.[78]</li>
<li><strong>Accessible:</strong> Data is stored in an open-format (mzML, mzMLb) that can be read by open-source tools (ProteoWizard, mzR, pymzML).[31, 65, 77]</li>
<li><strong>Interoperable:</strong> The PSI-MS Controlled Vocabulary ensures the data is machine-readable and semantically unambiguous.[8, 9]</li>
<li><strong>Re-usable:</strong> This is the final, most critical step. It requires <em>both</em> open data <em>and</em> a transparent analysis pipeline.[79, 80]</li>
</ul>
<p>The gold standard for ensuring re-usability is to use a formal workflow management system. Platforms like <strong>Galaxy</strong> are built for this purpose.[79] By running an analysis in Galaxy, a researcher gains access to:</p>
<ul>
<li><strong>A graphical interface</strong> for complex tools.[79]</li>
<li><strong>Tool version control</strong>, ensuring an analysis run today uses the same tool version as one run a year ago.[79]</li>
<li><strong>Full provenance tracking:</strong> Galaxy saves the <em>entire analysis history</em>, including every tool, every parameter, and every intermediate file.[79]</li>
</ul>
<p>This history can be shared, published, or exported, allowing any researcher in the world to download the exact data, import the exact workflow, and reproduce the original result, bit for bit.[79] This combination of open data formats (mzML) and transparent, version-controlled pipelines is the only robust solution to the reproducibility challenge in computational mass spectrometry.</p>
</section>
</section>
<section id="conclusions" class="level2" data-number="4.8">
<h2 data-number="4.8" class="anchored" data-anchor-id="conclusions"><span class="header-section-number">4.8</span> Conclusions</h2>
<p>The field of mass spectrometry informatics is defined by a constant struggle between the balkanized, high-performance world of proprietary vendor formats and the community’s need for open, interoperable, and standardized data.</p>
<ol type="1">
<li><p><strong>Interoperability is a Solved Problem:</strong> The development of the <code>mzML</code> standard, governed by the HUPO-PSI and built on the semantic foundation of the Controlled Vocabulary, has effectively solved the data-exchange problem. The existence of the <code>msconvert</code> tool provides a robust, practical “Rosetta Stone” for translating proprietary data into this open standard.</p></li>
<li><p><strong>Data Structure is Key:</strong> A practitioner must understand the fundamental data structures they are manipulating. The choice between <code>profile</code> and <code>centroid</code> data is a critical, destructive processing step. The semantic difference between <code>DDA</code> and <code>DIA</code> data is encoded only in the file’s metadata, and this distinction dictates the entire downstream analysis pipeline.</p></li>
<li><p><strong>Performance is the New Frontier:</strong> The primary challenge is no longer <em>interoperability</em> but <em>performance</em>. The XML/Base64 design of <code>mzML</code> is a recognized bottleneck for file size and access speed. This has driven the evolution of new formats. The <code>imzML</code> standard demonstrates the power of splitting metadata (XML) from binary data (<code>.ibd</code>). The <code>mzMLb</code> format perfects this by using an HDF5 container to efficiently store both native binary arrays and full XML metadata in a single, high-performance file. The adoption of <code>mzMLb</code> is a critical next step for the field.</p></li>
<li><p><strong>Reproducibility Requires a Pipeline:</strong> Open data (FAIR) is only half the battle. Scientific reproducibility requires transparent, version-controlled, and shareable analysis workflows. The use of programmatic libraries (<code>pymzML</code>, <code>pyteomics</code>, <code>mzR</code>) and workflow management systems (Galaxy, Nextflow) that capture full analysis provenance is no longer optional, but a mandatory component of modern, data-intensive science.</p></li>
</ol>
</section>
<section id="references" class="level2" data-number="4.9">
<h2 data-number="4.9" class="anchored" data-anchor-id="references"><span class="header-section-number">4.9</span> References</h2>
<ul>
<li><a href="https://github.com/HUPO-PSI/psi-ms-CV">https://github.com/HUPO-PSI/psi-ms-CV</a></li>
<li><a href="https://pubmed.ncbi.nlm.nih.gov/23482073/">https://pubmed.ncbi.nlm.nih.gov/23482073/</a></li>
<li><a href="https://pubs.acs.org/doi/10.1021/acs.jproteome.0c00350">https://pubs.acs.org/doi/10.1021/acs.jproteome.0c00350</a></li>
<li><a href="https://proteowizard.sourceforge.io/tools/filters.html">https://proteowizard.sourceforge.io/tools/filters.html</a></li>
<li><a href="https://homolog.us/Bioconductor/MzR.html">https://homolog.us/Bioconductor/MzR.html</a></li>
<li><a href="https://fiehnlab.ucdavis.edu/projects/lipidblast/mgf-files">https://fiehnlab.ucdavis.edu/projects/lipidblast/mgf-files</a></li>
<li><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC3073315/">https://pmc.ncbi.nlm.nih.gov/articles/PMC3073315/</a></li>
<li><a href="https://www.researchgate.net/publication/40690804_Mass_Spectrometer_Output_File_Format_mzML">https://www.researchgate.net/publication/40690804_Mass_Spectrometer_Output_File_Format_mzML</a></li>
<li><a href="https://proteowizard.sourceforge.io/tools/filters.html">https://proteowizard.sourceforge.io/tools/filters.html</a></li>
<li><a href="http://www.proteowizard.org/tools/msconvert.html">http://www.proteowizard.org/tools/msconvert.html</a></li>
<li><a href="https://pyteomics.readthedocs.io/en/latest/api/mzml.html">https://pyteomics.readthedocs.io/en/latest/api/mzml.html</a></li>
<li><a href="https://www.researchgate.net/publication/45694726_mzML-a_Community_Standard_for_Mass_Spectrometry_Data">https://www.researchgate.net/publication/45694726_mzML-a_Community_Standard_for_Mass_Spectrometry_Data</a></li>
<li><a href="https://pubmed.ncbi.nlm.nih.gov/28188540/">https://pubmed.ncbi.nlm.nih.gov/28188540/</a></li>
<li><a href="https://academic.oup.com/gigascience/article/8/12/giz143/5670614">https://academic.oup.com/gigascience/article/8/12/giz143/5670614</a></li>
<li><a href="https://lgatto.github.io/RforProteomics/articles/RProtVis.html">https://lgatto.github.io/RforProteomics/articles/RProtVis.html</a></li>
<li><a href="https://pymzml.readthedocs.io/en/stable/quick_start.html">https://pymzml.readthedocs.io/en/stable/quick_start.html</a></li>
<li><a href="https://chemrxiv.org/engage/api-gateway/chemrxiv/assets/orp/resource/item/6560961229a13c4d47e3bf51/original/mass-spectrometry-data-processing-in-m-zmine-3-feature-detection-and-annotation.pdf">https://chemrxiv.org/engage/api-gateway/chemrxiv/assets/orp/resource/item/6560961229a13c4d47e3bf51/original/mass-spectrometry-data-processing-in-m-zmine-3-feature-detection-and-annotation.pdf</a></li>
<li><a href="https://pubs.acs.org/doi/10.1021/acs.jproteome.0c00192">https://pubs.acs.org/doi/10.1021/acs.jproteome.0c00192</a></li>
<li><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC6465117/">https://pmc.ncbi.nlm.nih.gov/articles/PMC6465117/</a></li>
<li><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC8686675/">https://pmc.ncbi.nlm.nih.gov/articles/PMC8686675/</a></li>
<li><a href="https://en.wikipedia.org/wiki/Mass_spectrometry_data_format">https://en.wikipedia.org/wiki/Mass_spectrometry_data_format</a></li>
<li><a href="https://academic.oup.com/gigascience/article/8/12/giz143/5670614">https://academic.oup.com/gigascience/article/8/12/giz143/5670614</a></li>
<li><a href="https://ms-imaging.org/imzml/">https://ms-imaging.org/imzml/</a></li>
<li><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC3518119/">https://pmc.ncbi.nlm.nih.gov/articles/PMC3518119/</a></li>
<li><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC3073315/">https://pmc.ncbi.nlm.nih.gov/articles/PMC3073315/</a></li>
<li><a href="https://uclouvain-cbio.github.io/WSBIM2122/sec-ms.html">https://uclouvain-cbio.github.io/WSBIM2122/sec-ms.html</a></li>
<li><a href="https://pyteomics.readthedocs.io/en/latest/examples/example_msms.html">https://pyteomics.readthedocs.io/en/latest/examples/example_msms.html</a></li>
<li><a href="https://www.ms-imaging.org/imzml/controlled-vocabulary/">https://www.ms-imaging.org/imzml/controlled-vocabulary/</a></li>
<li><a href="https://github.com/HUPO-PSI/psi-ms-CV">https://github.com/HUPO-PSI/psi-ms-CV</a></li>
<li><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC3135311/">https://pmc.ncbi.nlm.nih.gov/articles/PMC3135311/</a></li>
<li><a href="https://skyline.ms/labkey/_webdav/home/software/Skyline/%40files/tutorials/DIA-2_6.pdf">https://skyline.ms/labkey/_webdav/home/software/Skyline/%40files/tutorials/DIA-2_6.pdf</a></li>
<li><a href="https://bioconductor.org/help/course-materials/2016/BioC2016/ConcurrentWorkshops4/Gatto/Bioc2016.html">https://bioconductor.org/help/course-materials/2016/BioC2016/ConcurrentWorkshops4/Gatto/Bioc2016.html</a></li>
<li><a href="https://uclouvain-cbio.github.io/WSBIM2122/sec-ms.html">https://uclouvain-cbio.github.io/WSBIM2122/sec-ms.html</a></li>
<li><a href="https://mobiusklein.github.io/psims/docs/build/html/mzml/components.html">https://mobiusklein.github.io/psims/docs/build/html/mzml/components.html</a></li>
<li><a href="https://www.psidev.info/controlled-vocabularies">https://www.psidev.info/controlled-vocabularies</a></li>
<li><a href="https://hupo.org/Proteomics-Standards-Initiative-(PSI)">https://hupo.org/Proteomics-Standards-Initiative-(PSI</a></li>
<li><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC10027714/">https://pmc.ncbi.nlm.nih.gov/articles/PMC10027714/</a></li>
<li><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC7116465/">https://pmc.ncbi.nlm.nih.gov/articles/PMC7116465/</a></li>
<li><a href="https://fairsharing.org/FAIRsharing.v7ft18">https://fairsharing.org/FAIRsharing.v7ft18</a></li>
<li><a href="https://pubs.acs.org/doi/full/10.1021/acs.jproteome.5c00435">https://pubs.acs.org/doi/full/10.1021/acs.jproteome.5c00435</a></li>
<li><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC3073315/">https://pmc.ncbi.nlm.nih.gov/articles/PMC3073315/</a></li>
<li><a href="https://pages.nist.gov/dimspec/docs/file_convert.pdf">https://pages.nist.gov/dimspec/docs/file_convert.pdf</a></li>
<li><a href="https://pyteomics.readthedocs.io/en/latest/api/mgf.html">https://pyteomics.readthedocs.io/en/latest/api/mgf.html</a></li>
<li><a href="https://proteowizard.sourceforge.io/doc_users.html">https://proteowizard.sourceforge.io/doc_users.html</a></li>
<li><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC4113728/">https://pmc.ncbi.nlm.nih.gov/articles/PMC4113728/</a></li>
<li><a href="https://proteowizard.sourceforge.io/tools/msconvert.html">https://proteowizard.sourceforge.io/tools/msconvert.html</a></li>
<li><a href="http://www.proteowizard.org/tools/msconvert.html">http://www.proteowizard.org/tools/msconvert.html</a></li>
<li><a href="https://yufree.cn/en/2025/05/14/introducing-thermoflask-simplifying-thermo-raw-file-processing/">https://yufree.cn/en/2025/05/14/introducing-thermoflask-simplifying-thermo-raw-file-processing/</a></li>
<li><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC3135311/">https://pmc.ncbi.nlm.nih.gov/articles/PMC3135311/</a></li>
<li><a href="http://www.proteowizard.org/tools/msconvert.html">http://www.proteowizard.org/tools/msconvert.html</a></li>
<li><a href="https://proteowizard.sourceforge.io/tools/msconvert.html">https://proteowizard.sourceforge.io/tools/msconvert.html</a></li>
<li><a href="https://www.frontiersin.org/journals/molecular-biosciences/articles/10.3389/fmolb.2023.1130781/full">https://www.frontiersin.org/journals/molecular-biosciences/articles/10.3389/fmolb.2023.1130781/full</a></li>
<li><a href="https://bioconductor.org/help/course-materials/2014/BioC2014/Gatto.html">https://bioconductor.org/help/course-materials/2014/BioC2014/Gatto.html</a></li>
<li><a href="https://pubs.acs.org/doi/10.1021/acs.jproteome.0c00192">https://pubs.acs.org/doi/10.1021/acs.jproteome.0c00192</a></li>
<li><a href="https://www.google.com/search?q=https://www.researchgate.net/publication/264435105_A_profile_a_and_centroid_b_version_of_the_same_spectrum_The_profile_raw_data">https://www.researchgate.net/publication/264435105_A_profile_a_and_centroid_b_version_of_the_same_spectrum_The_profile_raw_data</a></li>
<li><a href="https://github.com/pymzml/pymzML">https://github.com/pymzml/pymzML</a></li>
<li><a href="https://pymzml.readthedocs.io/en/latest/example_scripts.html">https://pymzml.readthedocs.io/en/latest/example_scripts.html</a></li>
<li><a href="https://www.technologynetworks.com/proteomics/lists/data-dependent-vs-data-independent-proteomic-analysis-331712">https://www.technologynetworks.com/proteomics/lists/data-dependent-vs-data-independent-proteomic-analysis-331712</a></li>
<li><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC3073315/">https://pmc.ncbi.nlm.nih.gov/articles/PMC3073315/</a></li>
<li><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC3518119/">https://pmc.ncbi.nlm.nih.gov/articles/PMC3518119/</a></li>
<li><a href="https://www.ewinglab.org/omicsanalysistutorial/ms-raw-data-formats.html">https://www.ewinglab.org/omicsanalysistutorial/ms-raw-data-formats.html</a></li>
<li><a href="https://pages.nist.gov/dimspec/docs/msmatch-home.html">https://pages.nist.gov/dimspec/docs/msmatch-home.html</a></li>
<li><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC4113728/">https://pmc.ncbi.nlm.nih.gov/articles/PMC4113728/</a></li>
<li><a href="https://www.creative-proteomics.com/ngpro/resource-dia-vs-dda-mass-spectrometry-a-comprehensive-comparison.html">https://www.creative-proteomics.com/ngpro/resource-dia-vs-dda-mass-spectrometry-a-comprehensive-comparison.html</a></li>
<li><a href="https://pyteomics.readthedocs.io/en/latest/api/mzml.html">https://pyteomics.readthedocs.io/en/latest/api/mzml.html</a></li>
<li><a href="http://tools.proteomecenter.org/wiki/index.php?title=Formats:mzXML">http://tools.proteomecenter.org/wiki/index.php?title=Formats:mzXML</a></li>
<li><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC3518119/">https://pmc.ncbi.nlm.nih.gov/articles/PMC3518119/</a></li>
<li><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC10915627/">https://pmc.ncbi.nlm.nih.gov/articles/PMC10915627/</a></li>
<li><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC3518119/">https://pmc.ncbi.nlm.nih.gov/articles/PMC3518119/</a></li>
<li><a href="https://blog.cellsignal.com/deep-proteome-profiling-with-dia">https://blog.cellsignal.com/deep-proteome-profiling-with-dia</a></li>
<li><a href="https://www.google.com/search?q=https://pmc.ncbi.nlm.nih.gov/articles/PMC3073315/%23:~:text%3DMuch%2520of%2520the%2520metadata%2520encoded,units%2520it%2520requires%252C%2520if%2520any">https://pmc.ncbi.nlm.nih.gov/articles/PMC3073315/#:~:text=Much%20of%20the%20metadata%20encoded,units%20it%20requires%2C%20if%20any</a>.</li>
<li><a href="https://www.metwarebio.com/dda-vs-dia-label-free-quantitative-proteomics/">https://www.metwarebio.com/dda-vs-dia-label-free-quantitative-proteomics/</a></li>
<li><a href="https://www.frontiersin.org/journals/bioengineering-and-biotechnology/articles/10.3389/fbioe.2014.00072/full">https://www.frontiersin.org/journals/bioengineering-and-biotechnology/articles/10.3389/fbioe.2014.00072/full</a></li>
<li><a href="https://www.chromforum.org/viewtopic.php?t=9535">https://www.chromforum.org/viewtopic.php?t=9535</a></li>
<li><a href="https://academic.oup.com/gigascience/article/8/12/giz143/5670614">https://academic.oup.com/gigascience/article/8/12/giz143/5670614</a></li>
<li><a href="https://pages.nist.gov/dimspec/docs/file_convert.pdf">https://pages.nist.gov/dimspec/docs/file_convert.pdf</a></li>
<li><a href="https://www.acdlabs.com/blog/what-is-the-dif/">https://www.acdlabs.com/blog/what-is-the-dif/</a></li>
<li><a href="https://academic.oup.com/bioinformatics/article/28/7/1052/209917">https://academic.oup.com/bioinformatics/article/28/7/1052/209917</a></li>
<li><a href="https://github.com/pymzml/pymzML">https://github.com/pymzml/pymzML</a></li>
<li><a href="https://pubs.acs.org/doi/full/10.1021/acs.jproteome.5c00435">https://pubs.acs.org/doi/full/10.1021/acs.jproteome.5c00435</a></li>
<li><a href="https://pyteomics.readthedocs.io/en/latest/api/ms1.html">https://pyteomics.readthedocs.io/en/latest/api/ms1.html</a></li>
<li><a href="https://www.metwarebio.com/proteomics-software-comparison-lc-msms-lfq-tmt-silac-dia/">https://www.metwarebio.com/proteomics-software-comparison-lc-msms-lfq-tmt-silac-dia/</a></li>
<li><a href="https://www.an.shimadzu.co.jp/sites/an.shimadzu.co.jp/files/pim/pim_document_file/an_jp/others/19927/centroidofprofile.pdf">https://www.an.shimadzu.co.jp/sites/an.shimadzu.co.jp/files/pim/pim_document_file/an_jp/others/19927/centroidofprofile.pdf</a></li>
<li><a href="https://pypi.org/project/pyteomics/">https://pypi.org/project/pyteomics/</a></li>
<li><a href="https://pubs.acs.org/doi/10.1021/jasms.3c00353">https://pubs.acs.org/doi/10.1021/jasms.3c00353</a></li>
<li><a href="https://www.jeolusa.com/RESOURCES/Analytical-Instruments/Mass-Spectrometry-Basics">https://www.jeolusa.com/RESOURCES/Analytical-Instruments/Mass-Spectrometry-Basics</a></li>
<li><a href="https://masspec.scripps.edu/learn/ms/">https://masspec.scripps.edu/learn/ms/</a></li>
<li><a href="https://www.ms-imaging.org/imzml/data-structure/">https://www.ms-imaging.org/imzml/data-structure/</a></li>
<li><a href="https://pubmed.ncbi.nlm.nih.gov/21063949/">https://pubmed.ncbi.nlm.nih.gov/21063949/</a></li>
<li><a href="https://pubs.acs.org/doi/10.1021/acs.analchem.4c06520">https://pubs.acs.org/doi/10.1021/acs.analchem.4c06520</a></li>
<li><a href="https://proteowizard.sourceforge.io/">https://proteowizard.sourceforge.io/</a></li>
<li><a href="https://ir.amolf.nl/pub/6121/15625M_Schramm.pdf">https://ir.amolf.nl/pub/6121/15625M_Schramm.pdf</a></li>
<li><a href="https://proteowizard.sourceforge.io/tools/msconvert.html">https://proteowizard.sourceforge.io/tools/msconvert.html</a></li>
<li><a href="https://pubs.acs.org/doi/abs/10.1021/acs.analchem.9b05135">https://pubs.acs.org/doi/abs/10.1021/acs.analchem.9b05135</a></li>
<li><a href="https://en.wikipedia.org/wiki/Mass_spectrum">https://en.wikipedia.org/wiki/Mass_spectrum</a></li>
</ul>


</section>

</main> <!-- /main -->
<script>

// Zoom Controls for Quarto Book

// Adds interactive zoom in/out functionality



(function() {

  'use strict';

  

  // Create zoom controls HTML

  function createZoomControls() {

    const controlsHTML = `

      <div class="zoom-controls" id="zoomControls">

        <button id="zoomInBtn" title="Zoom In (Ctrl +)">+</button>

        <button id="zoomOutBtn" title="Zoom Out (Ctrl -)">−</button>

        <button id="zoomResetBtn" title="Reset Zoom (Ctrl 0)">⌂</button>

        <div class="zoom-indicator" id="zoomIndicator">100%</div>

      </div>

    `;

    

    document.body.insertAdjacentHTML('beforeend', controlsHTML);

  }

  

  // Get current zoom level

  function getCurrentZoom() {

    const zoomClass = document.body.className.match(/zoom-(\d+)/);

    return zoomClass ? parseInt(zoomClass[1]) : 100;

  }

  

  // Set zoom level

  function setZoom(level) {

    // Remove existing zoom classes

    document.body.className = document.body.className

      .replace(/\bzoom-\d+\b/g, '')

      .trim();

    

    // Add new zoom class

    if (level !== 100) {

      document.body.classList.add(`zoom-${level}`);

    }

    

    // Update indicator

    const indicator = document.getElementById('zoomIndicator');

    if (indicator) {

      indicator.textContent = `${level}%`;

    }

    

    // Save to localStorage

    localStorage.setItem('bookZoomLevel', level);

    

    // Update button states

    updateButtonStates(level);

  }

  

  // Update button enabled/disabled states

  function updateButtonStates(level) {

    const zoomInBtn = document.getElementById('zoomInBtn');

    const zoomOutBtn = document.getElementById('zoomOutBtn');

    const zoomResetBtn = document.getElementById('zoomResetBtn');

    

    if (zoomInBtn) {

      zoomInBtn.disabled = level >= 200;

    }

    if (zoomOutBtn) {

      zoomOutBtn.disabled = level <= 50;

    }

    if (zoomResetBtn) {

      zoomResetBtn.disabled = level === 100;

    }

  }

  

  // Zoom in

  function zoomIn() {

    const current = getCurrentZoom();

    const levels = [50, 75, 100, 125, 150, 200];

    const currentIndex = levels.indexOf(current);

    

    if (currentIndex < levels.length - 1) {

      setZoom(levels[currentIndex + 1]);

    }

  }

  

  // Zoom out

  function zoomOut() {

    const current = getCurrentZoom();

    const levels = [50, 75, 100, 125, 150, 200];

    const currentIndex = levels.indexOf(current);

    

    if (currentIndex > 0) {

      setZoom(levels[currentIndex - 1]);

    }

  }

  

  // Reset zoom

  function resetZoom() {

    setZoom(100);

  }

  

  // Initialize zoom controls

  function initZoomControls() {

    // Create controls

    createZoomControls();

    

    // Attach event listeners

    const zoomInBtn = document.getElementById('zoomInBtn');

    const zoomOutBtn = document.getElementById('zoomOutBtn');

    const zoomResetBtn = document.getElementById('zoomResetBtn');

    

    if (zoomInBtn) {

      zoomInBtn.addEventListener('click', zoomIn);

    }

    if (zoomOutBtn) {

      zoomOutBtn.addEventListener('click', zoomOut);

    }

    if (zoomResetBtn) {

      zoomResetBtn.addEventListener('click', resetZoom);

    }

    

    // Keyboard shortcuts

    document.addEventListener('keydown', function(e) {

      // Ctrl + Plus or Ctrl + Equals

      if ((e.ctrlKey || e.metaKey) && (e.key === '+' || e.key === '=')) {

        e.preventDefault();

        zoomIn();

      }

      // Ctrl + Minus

      else if ((e.ctrlKey || e.metaKey) && e.key === '-') {

        e.preventDefault();

        zoomOut();

      }

      // Ctrl + 0

      else if ((e.ctrlKey || e.metaKey) && e.key === '0') {

        e.preventDefault();

        resetZoom();

      }

    });

    

    // Restore saved zoom level

    const savedZoom = localStorage.getItem('bookZoomLevel');

    if (savedZoom) {

      setZoom(parseInt(savedZoom));

    } else {

      setZoom(100);

    }

  }

  

  // Initialize when DOM is ready

  if (document.readyState === 'loading') {

    document.addEventListener('DOMContentLoaded', initZoomControls);

  } else {

    initZoomControls();

  }

  

  // Image click to zoom functionality

  document.addEventListener('click', function(e) {

    if (e.target.tagName === 'IMG' && !e.target.closest('.zoom-container')) {

      const img = e.target;

      const container = document.createElement('div');

      container.className = 'zoom-container';

      container.id = 'imageZoomContainer';

      

      const clonedImg = img.cloneNode(true);

      clonedImg.style.maxWidth = '85%';

      clonedImg.style.maxHeight = '95%';

      clonedImg.style.width = 'auto';

      clonedImg.style.height = 'auto';

      clonedImg.style.objectFit = 'contain';

      container.appendChild(clonedImg);

      document.body.appendChild(container);

      

      // Zoom in

      setTimeout(() => {

        container.classList.add('zoomed');

      }, 10);

      

      // Zoom out on click

      container.addEventListener('click', function() {

        container.classList.remove('zoomed');

        setTimeout(() => {

          container.remove();

        }, 300);

      });

    }

  });

  

})();

</script>



<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/vanhungtran\.github\.io\/RforMS\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./02-r-fundamentals.html" class="pagination-link" aria-label="R Fundamentals for Mass Spectrometry">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R Fundamentals for Mass Spectrometry</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./04-spectral-preprocessing-bis.html" class="pagination-link" aria-label="Spectral Data Preprocessing">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Spectral Data Preprocessing</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/vanhungtran/RforMS/edit/main/03-data-formats-import-bis.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/vanhungtran/RforMS/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer><script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>